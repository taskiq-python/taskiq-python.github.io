import{_ as d}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as c,o as p,c as u,b as e,d as s,e as r,w as a,a as i}from"./app-Lulzgzf0.js";const k={},h=i('<h1 id="available-brokers" tabindex="-1"><a class="header-anchor" href="#available-brokers"><span>Available brokers</span></a></h1><p>In this section we&#39;ll list officially supported brokers.</p><h2 id="inmemorybroker" tabindex="-1"><a class="header-anchor" href="#inmemorybroker"><span>InMemoryBroker</span></a></h2><p>This is a special broker for local development. It uses the same functions to execute tasks, but all tasks are executed locally in the current thread. By default it uses <code>InMemoryResultBackend</code> but this can be overridden.</p><h2 id="zeromqbroker" tabindex="-1"><a class="header-anchor" href="#zeromqbroker"><span>ZeroMQBroker</span></a></h2>',5),b={href:"https://zeromq.org/",target:"_blank",rel:"noopener noreferrer"},m=e("p",null,[s("It publishes messages on the local port. All worker processes are reading messages from this port. If you run many worker processes, all tasks will be executed "),e("code",null,"N"),s(" times, where "),e("code",null,"N"),s(" is the total number of worker processes.")],-1),v=e("div",{class:"hint-container caution"},[e("p",{class:"hint-container-title"},"Be careful!"),e("p",null,[s("If you choose this type of broker, please run taskiq with "),e("code",null,"-w 1"),s(" parameter, otherwise you may encounter undefined behavior.")])],-1),f={href:"https://pypi.org/project/pyzmq/",target:"_blank",rel:"noopener noreferrer"},y=e("code",null,"zmq",-1),_=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[s("pip "),e("span",{class:"token function"},"install"),s(` pyzmq
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),g=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[s("pip "),e("span",{class:"token function"},"install"),s(),e("span",{class:"token string"},'"taskiq[zmq]"'),s(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),q=i(`<h2 id="async-shared-broker-and-shared-tasks" tabindex="-1"><a class="header-anchor" href="#async-shared-broker-and-shared-tasks"><span>Async shared broker and shared tasks</span></a></h2><p>This is also a special broker. You cannot use it directly. It&#39;s used to create shared tasks. These tasks can be imported along with user defined tasks. To define a shared task please use this broker.</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="language-python"><code><span class="token keyword">from</span> taskiq<span class="token punctuation">.</span>brokers<span class="token punctuation">.</span>shared_broker <span class="token keyword">import</span> async_shared_broker

<span class="token decorator annotation punctuation">@async_shared_broker<span class="token punctuation">.</span>task</span>
<span class="token keyword">def</span> <span class="token function">my_task</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token boolean">True</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To kiq this task you have to options:</p><ul><li>Explicitly define broker using kicker for this kiq;</li><li>Add default broker for all shared tasks.</li></ul>`,5),x=e("div",{class:"language-python line-numbers-mode","data-ext":"py","data-title":"py"},[e("pre",{class:"language-python"},[e("code",null,[e("span",{class:"token keyword"},"from"),s(" taskiq"),e("span",{class:"token punctuation"},"."),s("brokers"),e("span",{class:"token punctuation"},"."),s("shared_broker "),e("span",{class:"token keyword"},"import"),s(` async_shared_broker

async_shared_broker`),e("span",{class:"token punctuation"},"."),s("default_broker"),e("span",{class:"token punctuation"},"("),s("broker"),e("span",{class:"token punctuation"},")"),s(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),w=e("div",{class:"language-python line-numbers-mode","data-ext":"py","data-title":"py"},[e("pre",{class:"language-python"},[e("code",null,[e("span",{class:"token keyword"},"await"),s(" my_task"),e("span",{class:"token punctuation"},"."),s("kicker"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},"."),s("with_broker"),e("span",{class:"token punctuation"},"("),s("broker"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},"."),s("kiq"),e("span",{class:"token punctuation"},"("),e("span",{class:"token punctuation"},")"),s(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),T=e("h2",{id:"custom-brokers",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#custom-brokers"},[e("span",null,"Custom brokers")])],-1),A=e("p",null,"These brokers are not parts of the core taskiq lib. You can install them as a separate packages.",-1),I=e("p",null,"You can read more about parameters and abilities of these brokers in README.md of each repo.",-1),M=e("h3",{id:"aiopikabroker-for-rabbitmq",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#aiopikabroker-for-rabbitmq"},[e("span",null,"AioPikaBroker (for RabbitMQ)")])],-1),B={href:"https://github.com/taskiq-python/taskiq-aio-pika",target:"_blank",rel:"noopener noreferrer"},z=i(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> taskiq-aio-pika
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="redis-broker" tabindex="-1"><a class="header-anchor" href="#redis-broker"><span>Redis broker</span></a></h3>`,2),Z={href:"https://github.com/taskiq-python/taskiq-redis",target:"_blank",rel:"noopener noreferrer"},N=i(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> taskiq-redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="nats-broker" tabindex="-1"><a class="header-anchor" href="#nats-broker"><span>NATS broker</span></a></h3>`,2),Q={href:"https://github.com/taskiq-python/taskiq-nats",target:"_blank",rel:"noopener noreferrer"},P=i(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> taskiq-nats
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,1);function R(E,j){const o=c("ExternalLinkIcon"),l=c("Tabs");return p(),u("div",null,[h,e("p",null,[s("This broker uses "),e("a",b,[s("ZMQ"),r(o)]),s(" to communicate between worker and client processes. It's suitable for small projects with only ONE worker process, because of the ZMQ architecture.")]),m,v,e("p",null,[s("To run this broker please install the "),e("a",f,[s("pyzmq"),r(o)]),s(" lib. Or you can taskiq with "),y,s(" extra.")]),r(l,{id:"29",data:[{id:"Only PyZMQ"},{id:"Taskiq with ZMQ"}]},{title0:a(({value:t,isActive:n})=>[s("Only PyZMQ")]),title1:a(({value:t,isActive:n})=>[s("Taskiq with ZMQ")]),tab0:a(({value:t,isActive:n})=>[_]),tab1:a(({value:t,isActive:n})=>[g]),_:1}),q,r(l,{id:"59",data:[{id:"Defining default broker"},{id:"using kicker"}]},{title0:a(({value:t,isActive:n})=>[s("Defining default broker")]),title1:a(({value:t,isActive:n})=>[s("using kicker")]),tab0:a(({value:t,isActive:n})=>[x]),tab1:a(({value:t,isActive:n})=>[w]),_:1}),T,A,I,M,e("p",null,[s("Project link: "),e("a",B,[s("taskiq-aio-pika"),r(o)]),s(".")]),z,e("p",null,[s("Project link: "),e("a",Z,[s("taskiq-redis"),r(o)]),s(".")]),N,e("p",null,[s("Project link: "),e("a",Q,[s("taskiq-nats"),r(o)]),s(".")]),P])}const O=d(k,[["render",R],["__file","brokers.html.vue"]]),C=JSON.parse(`{"path":"/available-components/brokers.html","title":"Available brokers","lang":"en-US","frontmatter":{"order":2,"description":"Available brokers In this section we'll list officially supported brokers. InMemoryBroker This is a special broker for local development. It uses the same functions to execute t...","head":[["meta",{"property":"og:url","content":"https://taskiq-python.github.io/available-components/brokers.html"}],["meta",{"property":"og:site_name","content":"Taskiq"}],["meta",{"property":"og:title","content":"Available brokers"}],["meta",{"property":"og:description","content":"Available brokers In this section we'll list officially supported brokers. InMemoryBroker This is a special broker for local development. It uses the same functions to execute t..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-02-05T23:36:31.000Z"}],["meta",{"property":"article:modified_time","content":"2024-02-05T23:36:31.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Available brokers\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-02-05T23:36:31.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"InMemoryBroker","slug":"inmemorybroker","link":"#inmemorybroker","children":[]},{"level":2,"title":"ZeroMQBroker","slug":"zeromqbroker","link":"#zeromqbroker","children":[]},{"level":2,"title":"Async shared broker and shared tasks","slug":"async-shared-broker-and-shared-tasks","link":"#async-shared-broker-and-shared-tasks","children":[]},{"level":2,"title":"Custom brokers","slug":"custom-brokers","link":"#custom-brokers","children":[{"level":3,"title":"AioPikaBroker (for RabbitMQ)","slug":"aiopikabroker-for-rabbitmq","link":"#aiopikabroker-for-rabbitmq","children":[]},{"level":3,"title":"Redis broker","slug":"redis-broker","link":"#redis-broker","children":[]},{"level":3,"title":"NATS broker","slug":"nats-broker","link":"#nats-broker","children":[]}]}],"git":{"createdTime":1707176191000,"updatedTime":1707176191000,"contributors":[{"name":"Pavel Kirilin","email":"win10@list.ru","commits":1}]},"filePathRelative":"available-components/brokers.md","localizedDate":"February 5, 2024","autoDesc":true,"excerpt":"\\n<p>In this section we'll list officially supported brokers.</p>\\n<h2>InMemoryBroker</h2>\\n<p>This is a special broker for local development. It uses the same functions to execute tasks,\\nbut all tasks are executed locally in the current thread.\\nBy default it uses <code>InMemoryResultBackend</code> but this can be overridden.</p>"}`);export{O as comp,C as data};
